<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BC Rental Timeline - Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/vis-timeline@7.7.3/styles/vis-timeline-graph2d.min.css">
    <link rel="stylesheet" href="rental-gantt.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
            padding: 30px;
        }
        h1 {
            margin: 0 0 10px 0;
            color: #1f2937;
            font-size: 28px;
        }
        .subtitle {
            color: #6b7280;
            margin-bottom: 30px;
            font-size: 14px;
        }
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: transform 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
        }
        button:active {
            transform: translateY(0);
        }
        #rental-gantt-container {
            width: 100%;
            height: 600px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #f9fafb;
        }
        .info {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            padding: 15px;
            border-radius: 6px;
            margin-top: 20px;
            font-size: 13px;
            color: #1e40af;
        }
        .info strong {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìÖ BC Rental Timeline - Demo</h1>
        <p class="subtitle">Testing environment for Business Central Rental Gantt Chart extension</p>

        <div class="controls">
            <button onclick="loadSampleData()">Load Sample Data</button>
            <button onclick="Clear()">Clear Timeline</button>
            <button onclick="Refresh()">Refresh</button>
            <button onclick="SetViewMode('Day')">Day View</button>
            <button onclick="SetViewMode('Week')">Week View</button>
            <button onclick="SetViewMode('Month')">Month View</button>
        </div>

        <div id="rental-gantt-container"></div>

        <div class="info">
            <strong>‚ÑπÔ∏è About This Demo</strong>
            This page demonstrates the timeline visualization that will be embedded in Business Central.<br>
            The sample data shows rental contracts for different equipment (cranes, lifts) with various statuses.<br>
            <br>
            <strong>Features:</strong>
            ‚Ä¢ Zoom: Mouse wheel or pinch<br>
            ‚Ä¢ Pan: Click and drag<br>
            ‚Ä¢ Click: Contract details<br>
            ‚Ä¢ Colors: üü¢ Active | üü° Future | ‚ö´ Expired
        </div>
    </div>

    <!-- Load vis-timeline library -->
    <script src="https://unpkg.com/vis-timeline@7.7.3/standalone/umd/vis-timeline-graph2d.min.js"></script>

    <!-- Stub for BC extensibility method (not available in browser) -->
    <script>
        window.Microsoft = {
            Dynamics: {
                NAV: {
                    InvokeExtensibilityMethod: function(method, args) {
                        console.log('AL Event:', method, args);
                    }
                }
            }
        };
    </script>

    <!-- Load timeline functions -->
    <script src="rental-gantt.js"></script>

    <!-- Demo-specific scripts -->
    <script>
        // Create container on page load
        function initContainer() {
            var container = document.getElementById('rental-gantt-container');
            if (!container) {
                container = document.createElement('div');
                container.id = 'rental-gantt-container';
                document.body.appendChild(container);
            }
        }

        function loadSampleData() {
            var today = new Date();
            var monthAgo = new Date(today);
            monthAgo.setMonth(monthAgo.getMonth() - 1);
            var monthFromNow = new Date(today);
            monthFromNow.setMonth(monthFromNow.getMonth() + 1);
            var twoMonthsFromNow = new Date(today);
            twoMonthsFromNow.setMonth(twoMonthsFromNow.getMonth() + 2);

            var sampleData = {
                "groups": [
                    {"id": "LH115", "content": "LH115<br>Crane"},
                    {"id": "GR116", "content": "GR116<br>Lift"},
                    {"id": "EX200", "content": "EX200<br>Excavator"},
                    {"id": "FL450", "content": "FL450<br>Forklift"},
                    {"id": "TR300", "content": "TR300<br>Truck"}
                ],
                "items": [
                    {
                        "id": "R12345",
                        "group": "LH115",
                        "content": "R12345 - ABC Construction",
                        "start": formatDate(monthAgo),
                        "end": formatDate(monthFromNow),
                        "title": "<strong>R12345</strong><br>Customer: ABC Construction<br>Status: Active<br>Duration: 60 days",
                        "className": "active-contract"
                    },
                    {
                        "id": "R12346",
                        "group": "GR116",
                        "content": "R12346 - XYZ Builders",
                        "start": formatDate(today),
                        "end": formatDate(twoMonthsFromNow),
                        "title": "<strong>R12346</strong><br>Customer: XYZ Builders<br>Status: Future<br>Duration: 60 days",
                        "className": "future-contract"
                    },
                    {
                        "id": "R12347",
                        "group": "EX200",
                        "content": "R12347 - Mega Projects",
                        "start": formatDate(new Date(2025, 0, 1)),
                        "end": formatDate(new Date(2025, 1, 15)),
                        "title": "<strong>R12347</strong><br>Customer: Mega Projects<br>Status: Expired<br>Duration: 45 days",
                        "className": "expired-contract"
                    },
                    {
                        "id": "R12348",
                        "group": "FL450",
                        "content": "R12348 - Quick Hire Ltd",
                        "start": formatDate(monthAgo),
                        "end": formatDate(today),
                        "title": "<strong>R12348</strong><br>Customer: Quick Hire Ltd<br>Status: Active<br>Duration: 30 days",
                        "className": "active-contract"
                    },
                    {
                        "id": "R12349",
                        "group": "TR300",
                        "content": "R12349 - Transport Co",
                        "start": formatDate(monthFromNow),
                        "end": formatDate(twoMonthsFromNow),
                        "title": "<strong>R12349</strong><br>Customer: Transport Co<br>Status: Future<br>Duration: 30 days",
                        "className": "future-contract"
                    },
                    {
                        "id": "R12350",
                        "group": "LH115",
                        "content": "R12350 - City Works",
                        "start": formatDate(twoMonthsFromNow),
                        "end": formatDate(new Date(twoMonthsFromNow.getTime() + 30*24*60*60*1000)),
                        "title": "<strong>R12350</strong><br>Customer: City Works<br>Status: Future<br>Duration: 30 days",
                        "className": "future-contract"
                    }
                ]
            };

            LoadData(JSON.stringify(sampleData));
        }

        function formatDate(date) {
            var year = date.getFullYear();
            var month = String(date.getMonth() + 1).padStart(2, '0');
            var day = String(date.getDate()).padStart(2, '0');
            return year + '-' + month + '-' + day;
        }

        // Initialize on page load
        window.addEventListener('load', function() {
            initContainer();
            loadSampleData();
        });
    </script>
</body>
</html>
